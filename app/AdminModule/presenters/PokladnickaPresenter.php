<?phpnamespace App\AdminModule\Presenters;use DbTable;/** * Prezenter pre spravu pokladnicky. *  * Posledna zmena(last change): 02.06.2016 * @actions default, edit[$id] *  *	Modul: ADMIN *  * @author Ing. Peter VOJTECH ml. <petak23@gmail.com> * @copyright  Copyright (c) 2012 - 2016 Ing. Peter VOJTECH ml. * @license * @link       http://petak23.echo-msz.eu * @version 1.0.5  */class PokladnickaPresenter extends \App\AdminModule\Presenters\BasePresenter {  /**    * @inject   * @var DbTable\Pokladnicka */	public $pokladnicka;    /** @var int $id_pokladnicka */  private $id_pokladnicka = 0;    // --- Forms ---  /** @var Forms\Pokladnicka\EditPokladnickaFormFactory @inject*/	public $editPokladnickaFormFactory;    /**   * Akcia pre editaciu   * @param int $id */	public function actionEdit($id) {    if (($polozka = $this->pokladnicka->find($id)) !== FALSE) {      $this->template->h2 = 'Editácia položky: '.$polozka->ucel;      $this->id_pokladnicka = $id;    } else { //Ak je vsetko OK priprav premenne      $this->flashRedirect('Pokladnicka:', 'Došlo k chybe. K id neexzistuje položka.', 'danger');    }	}    /** Render pre vychodziu akciu */  public function renderDefault() {    $this->template->pokladnicka = $this->pokladnicka->pokladnicka();  }      /**   * Formular a jeho spracovanie pre pridanie a aditaciu poloziek pokladnicky.   * @return \Nette\Application\UI\Form */	protected function createComponentPokladnickaForm() {    $form = $this->editPokladnickaFormFactory->create($this->id_pokladnicka);    $form['uloz']->onClick[] = function ($button) {       $this->flashOut(!count($button->getForm()->errors), 'Pokladnicka:', 'Položka bola úspešne uložená!', 'Došlo k chybe a položka sa neuložila. Skúste neskôr znovu...');		};    $form['cancel']->onClick[] = function () {			$this->redirect('Pokladnicka:');		};		return $this->_vzhladForm($form);	}  // ----------- Spracovanie vymazavania --------  // Samotna komponenta ConfirmForm je v BasePresenter-i  /**    * Funkcia pre spracovanie signálu vymazavania	 * @param int $id - id polozky */	function confirmedDelete($id)	{		if ($this->pokladnicka->zmaz($id) == 1) {$this->flashMessage('Položka bola úspešne vymazaná!', 'success');}    else {$this->flashMessage('Došlo k chybe a položka nebola vymazaná!', 'danger');}    if (!$this->isAjax()) {$this->redirect('Pokladnicka:');}  }    /**   * Zostavenie otázky pre ConfDialog s parametrom   * @param Nette\Utils\Html $dialog   * @param array $params   * @return string $question */  public function questionDelete($dialog, $params) {     $dialog->getQuestionPrototype();     return sprintf("Naozaj chceš zmazať položku: '%s'?", isset($params['nazov']) ? $params['nazov'] : '');  }}