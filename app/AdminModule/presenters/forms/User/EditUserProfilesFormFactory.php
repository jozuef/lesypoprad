<?phpnamespace App\AdminModule\Presenters\Forms\User;use Nette\Application\UI\Form;use Nette\Security\User;use DbTable;/** * Tovarnicka pre formular na editaciu profilu uzivatela * Posledna zmena 22.05.2017 *  * @author     Ing. Peter VOJTECH ml. <petak23@gmail.com> * @copyright  Copyright (c) 2012 - 2017 Ing. Peter VOJTECH ml. * @license * @link       http://petak23.echo-msz.eu * @version    1.0.0 */class EditUserProfilesFormFactory {  /** @var DbTable\User_main *///	private $user_main;  /** @var DbTable\User_profiles */	private $user_profiles;    /**   * @param DbTable\User_main $user_main   * @param DbTable\User_profiles $user_profiles   * @param DbTable\User_roles $user_roles   * @param \App\AdminModule\Presenters\Forms\User\User $user */  public function __construct(/*DbTable\User_main $user_main,*/ DbTable\User_profiles $user_profiles, DbTable\User_roles $user_roles, User $user) {//		$this->user_main = $user_main;    $this->user_profiles = $user_profiles;    $this->urovneReg = $user_roles->urovneReg(($user->isLoggedIn()) ? $user->getIdentity()->id_user_roles : 0); //Hodnoty id=>nazov pre formulare z tabulky user_roles	}  /**   * Edit hlavne menu form component factory.   * @return Nette\Application\UI\Form   */    public function create($user_view_fields)  {    $form = new Form();		$form->addProtection();    $form->addHidden('id');    if ($user_view_fields["rok"]) {      $form->addText('rok', 'Rok narodenia:', 4, 5)           ->addRule(Form::RANGE, 'Rok narodenia musí byť v rozsahu od %d do %d', [1900, StrFTime("%Y", Time())]);    }    if ($user_view_fields["telefon"]) {      $form->addText('telefon', 'Telefón:', 20, 20);    }    if ($user_view_fields["poznamka"]) {      $form->addText('poznamka', 'Poznámka:', 50, 250);    }    if ($user_view_fields["pohl"]) {      $form->addSelect('pohl', 'Pohlavie:', ['M'=>'Muž','Z'=>'Žena']);    }    $form->addSubmit('uloz', 'Ulož')         ->setAttribute('class', 'btn btn-success')         ->onClick[] = [$this, 'editUserFormSubmitted'];;    $form->addSubmit('cancel', 'Cancel')->setAttribute('class', 'btn btn-default')         ->setValidationScope(FALSE);		return $form;	}    /**    * Spracovanie vstupov z formulara   * @param Nette\Forms\Controls\SubmitButton $button Data formulara */	public function editUserFormSubmitted($button)	{    $values = $button->getForm()->getValues();    try {			$this->user_profiles->saveUser($values);		} catch (Database\DriverException $e) {			$button->addError($e->getMessage());		}	}}