<?phpnamespace App\FrontModule\Components\Faktury;use Nette;use Ublaboo\DataGrid\DataGrid;use Ublaboo\DataGrid\Localization\SimpleTranslator;use DbTable;/** * Komponenta pre zobrazenie casti faktur pre FRONT modul * Posledna zmena(last change): 27.04.2017 * * @author Ing. Peter VOJTECH ml <petak23@gmail.com> * @copyright Copyright (c) 2012 - 2017 Ing. Peter VOJTECH ml. * @license * @link http://petak23.echo-msz.eu * @version 1.0.0 * */class ViewFakturyControl extends Nette\Application\UI\Control {  /** @var DbTable\Faktury */  private $faktury;    private $skupina;  private $zmluvy = FALSE;  public function __construct(DbTable\Faktury $faktury) {    parent::__construct();    $this->faktury = $faktury;  }    /**   * Nastavenie skupiny   * @param int $skupina   */  public function setSkupina($skupina) {    $this->skupina = $skupina;    if ($this->skupina == 25) { $this->zmluvy = TRUE;}  }    /**    * Render    * @see Nette\Application\Control#render() */  public function render() {     $this->template->setFile(__DIR__ . '/ViewFaktury.latte');    $this->template->skupina = $this->skupina;    $this->template->render();  }    public function createComponentFakturyGrid($name) {		$grid = new DataGrid($this, $name);		$grid->setDataSource($this->faktury->findBy(['id_hlavne_menu'=>  $this->skupina])->order('datum_vystavenia DESC'));		$grid->addColumnText('cislo', 'Číslo');    $grid->addColumnText('subjekt', $this->zmluvy ? "Zmluvná strana" : "Dodávateľ");    if ($this->zmluvy) { $grid->addColumnText('nazov', 'Názov');}    $grid->addColumnText('predmet', 'Predmet');    $grid->addColumnNumber('cena', $this->zmluvy ? "Cena vrátane DPH" : "Suma")->setFormat(2,',','');    $grid->addColumnDateTime('datum_vystavenia', $this->zmluvy ? "Dátum uzatvorenia zmluvy" : "Dátum vystavenia");    if ($this->zmluvy) { $grid->addColumnDateTime('datum_ukoncenia', 'Dátum ukončenia zmluvy');}    $grid->addColumnLink('subor', 'Detail', 'dokumentOpen', 'subor', ['subor'])->setOpenInNewTab();    /**    * Localization    */   $translator = new SimpleTranslator([     'ublaboo_datagrid.no_item_found_reset' => 'Žiadné položky neboli nájdené. Filter môžete vynulovať...',     'ublaboo_datagrid.no_item_found' => 'Žiadné položky neboli nájdené.',     'ublaboo_datagrid.here' => 'tu',     'ublaboo_datagrid.items' => 'Položky',     'ublaboo_datagrid.all' => 'všetky',     'ublaboo_datagrid.from' => 'z',     'ublaboo_datagrid.reset_filter' => 'Resetovať filter',     'ublaboo_datagrid.group_actions' => 'Hromadné akcie',     'ublaboo_datagrid.show_all_columns' => 'Zobraziť všetky stĺpce',     'ublaboo_datagrid.hide_column' => 'Skryť stĺpec',     'ublaboo_datagrid.action' => 'Akcia',     'ublaboo_datagrid.previous' => 'Predošlá',     'ublaboo_datagrid.next' => 'Daľšia',     'ublaboo_datagrid.choose' => 'Vyberte',     'ublaboo_datagrid.execute' => 'Vykonať',   ]);   $grid->setTranslator($translator);	}    public function handleDokumentOpen($subor) {    $this->presenter->redirectUrl("http://".$this->presenter->nazov_stranky."/www/files/dokumenty/".$subor);		exit;  }}interface IViewFakturyControl {  /** @return ViewFakturyControl */  function create();}